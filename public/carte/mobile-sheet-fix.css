/* mobile-sheet-fix.css
   Fix: en mobile, l'état rétracté (sheet--mid) doit être VRAIMENT compact,
   pour ne pas cacher la map.
*/

@media (max-width: 768px) {
  :root {
    /* hauteur du panneau en mode "rétracté" */
    --sheet-collapsed-height: 92px; /* essaye 76px si tu veux encore plus petit */
  }

  /* ===============================
     1) MODE RÉTRACTÉ = sheet--mid
     =============================== */
  #sheet.sheet--mid {
    height: calc(var(--sheet-collapsed-height) + env(safe-area-inset-bottom, 0px)) !important;
    max-height: calc(var(--sheet-collapsed-height) + env(safe-area-inset-bottom, 0px)) !important;
    overflow: hidden !important;
    padding-bottom: env(safe-area-inset-bottom, 0px) !important;
  }

  /* On garde UNIQUEMENT la poignée + les tabs en mode rétracté */
  #sheet.sheet--mid #status,
  #sheet.sheet--mid #listView,
  #sheet.sheet--mid #detailView {
    display: none !important;
  }

  /* ===============================
     2) Ajustements UI (plus compact)
     =============================== */
  #sheet.sheet--mid .sheet-handle {
    padding-top: 10px !important;
    padding-bottom: 6px !important;
  }

  #sheet.sheet--mid .sheet-grip {
    width: 46px !important;
    height: 4px !important;
    border-radius: 999px !important;
  }

  #sheet.sheet--mid .sheet-content {
    padding-top: 0 !important;
    padding-bottom: env(safe-area-inset-bottom, 0px) !important;
  }

  #sheet.sheet--mid .tabs {
    padding: 8px 12px 10px !important;
    gap: 10px !important;
  }

  #sheet.sheet--mid .tab {
    padding: 10px 14px !important;
    border-radius: 999px !important;
    font-size: 14px !important;
    line-height: 1 !important;
  }

  /* ===============================
     3) BONUS: si tu as un état "mini" / "collapsed" plus tard
     (au cas où ton JS change)
     =============================== */
  #sheet.sheet--collapsed,
  #sheet.sheet--mini,
  #sheet.collapsed {
    height: calc(var(--sheet-collapsed-height) + env(safe-area-inset-bottom, 0px)) !important;
    max-height: calc(var(--sheet-collapsed-height) + env(safe-area-inset-bottom, 0px)) !important;
    overflow: hidden !important;
  }

  #sheet.sheet--collapsed #status,
  #sheet.sheet--collapsed #listView,
  #sheet.sheet--collapsed #detailView,
  #sheet.sheet--mini #status,
  #sheet.sheet--mini #listView,
  #sheet.sheet--mini #detailView,
  #sheet.collapsed #status,
  #sheet.collapsed #listView,
  #sheet.collapsed #detailView {
    display: none !important;
  }
}